(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{412:e=>{e.exports=new Proxy({},{get:(e,t)=>{if("__esModule"===t)return{};throw Error(`You're trying to import \`@heroicons/react/outline/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}})},5968:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(4232);n(6048);var a=n(7876),o=n(8944),l=n(412);function c(e){let{job:t,onFinish:n}=e;if(!t)return console.error("ChatWindow received null job prop!"),(0,a.jsx)("p",{children:"Jobdaten fehlen."});let[o,c]=(0,r.useState)([]),[s,i]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;let t=new e;t.lang="de-DE",t.interimResults=!1,t.onresult=e=>{let t=e.results[0][0].transcript;m(e=>e+" "+t)},t.onend=()=>p(!1),f.current=t},[]);let b=async e=>{if(!e.trim())return;let n=[...o,{role:"user",content:e}];c(n),m(""),i(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n,jobId:t.id})}),r=(await e.json()).message;r&&r.role&&c(e=>[...e,r])}catch(e){console.error(e),c(e=>[...e,{role:"system",content:"Fehler beim Senden."}])}finally{i(!1)}};return r.createElement("div",{className:"bg-gray-50 min-h-screen py-6"},r.createElement("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6 flex flex-col space-y-6"},r.createElement("header",{className:"flex items-center space-x-4"},r.createElement("img",{src:t.companyLogo,alt:t.companyName,className:"h-16 w-16 object-contain"}),r.createElement("div",null,r.createElement("h2",{className:"text-2xl font-bold"},t.title),r.createElement("p",{className:"text-gray-600"},t.companyName),r.createElement("p",{className:"text-sm text-gray-500"},t.companyAddress),r.createElement("a",{href:t.companyWebsite,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm"},t.companyWebsite))),r.createElement("section",{className:"space-y-4 text-gray-800"},r.createElement("p",{className:"italic text-gray-700"},'"'.concat(t.announcement,'"')),r.createElement("p",null,t.description),r.createElement("div",null,r.createElement("h3",{className:"font-semibold"},"Fragen:"),r.createElement("ul",{className:"list-disc list-inside"},...t.questions.map((e,t)=>r.createElement("li",{key:t},e)))),r.createElement("div",null,r.createElement("h3",{className:"font-semibold"},"Anzufordernde Dateien:"),r.createElement("ul",{className:"list-disc list-inside"},...t.fileUploads.map((e,t)=>r.createElement("li",{key:t},"".concat(e.label).concat(e.required?" (Pflicht)":""))))),r.createElement("div",null,r.createElement("h3",{className:"font-semibold"},"Zus\xe4tzliche Infos:"),r.createElement("ul",{className:"list-disc list-inside"},...t.informationRequested.map((e,t)=>r.createElement("li",{key:t},e))))),r.createElement("section",{className:"flex flex-col space-y-4"},r.createElement("div",{className:"flex-1 h-80 overflow-y-auto border border-gray-200 rounded p-4 flex flex-col space-y-3"},...o.filter(e=>e&&e.role).map((e,t)=>r.createElement("div",{key:t,className:"p-3 rounded-lg ".concat("user"===e.role?"bg-blue-100 self-end":"bg-gray-100 self-start")},r.createElement("span",{className:"block font-medium text-sm"},"user"===e.role?"Sie:":"Bot:"),r.createElement("p",{className:"mt-1"},e.content))),s&&r.createElement("p",{className:"text-center text-gray-500"},"...")),r.createElement("div",{className:"flex items-center space-x-2"},r.createElement("button",{type:"button",onClick:()=>{f.current&&(p(!0),f.current.start())},disabled:u,className:"p-2 rounded-full border ".concat(u?"bg-red-100":"bg-white hover:bg-gray-50")},r.createElement(l.MicrophoneIcon,{className:"h-6 w-6 text-gray-600"})),r.createElement("input",{type:"text",value:d,onChange:e=>m(e.target.value),placeholder:"Nachricht eingeben...",className:"flex-1 border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"}),r.createElement("button",{type:"button",onClick:()=>b(d),className:"p-2 bg-blue-600 rounded-full hover:bg-blue-700"},r.createElement(l.PaperAirplaneIcon,{className:"h-6 w-6 text-white transform rotate-90"}))),r.createElement("button",{onClick:()=>n(o),className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700"},"Bewerbung abschlie\xdfen"))))}async function s(){try{let e=document.getElementById("kibt-app");if(!e)throw Error("Kein #kibt-app-Container gefunden.");let t=e.dataset.jobId||"";if(!t)throw Error("Data-Attribute job-id fehlt.");let{rest_base:n,nonce:r}=window.KIBT_SETTINGS||{};if(!n)throw Error("KIBT_SETTINGS.rest_base nicht definiert.");let l=await fetch("".concat(n,"config"),{headers:{"X-WP-Nonce":r}});if(!l.ok)throw Error("Fehler beim Laden der Config (".concat(l.status,")"));let s=await l.json(),i=(s.postings||s.jobs||[]).find(e=>String(e.id)===String(t));if(!i){e.innerHTML="<p>Stelle nicht gefunden.</p>";return}let d=document.querySelector("h1");d&&(d.textContent=i.title||"Stellenangebot"),(0,o.createRoot)(e).render((0,a.jsx)(c,{job:i,onFinish:async e=>{try{await fetch("".concat(n,"applications"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r},body:JSON.stringify({jobId:t,messages:e})}),alert("Bewerbung erfolgreich!")}catch(e){console.error("[KIBT] Error sending application:",e),alert("Fehler beim Abschicken")}}}))}catch(t){console.error("[KIBT] bootstrap error:",t);let e=document.createElement("div");e.style="color:red;padding:1em;font-weight:bold;",e.textContent="KIBT-Fehler: ".concat(t.message),document.body.prepend(e)}}function i(e){let{Component:t,pageProps:n}=e;return r.createElement(t,n)}window.jobscout&&"function"==typeof window.jobscout.init&&(console.warn("[KIBT] jobscout.init disabled to prevent conflicts"),window.jobscout.init=()=>{}),function(){if("undefined"!=typeof document&&!document.querySelector("h1")){let e=document.createElement("h1");e.className="screen-reader-text",e.textContent="Stellenangebote",document.body.prepend(e),console.info("[KIBT] Dummy <h1> f\xfcr Next.js-Announcer eingef\xfcgt.")}}(),"undefined"!=typeof document?"loading"===document.readyState?document.addEventListener("DOMContentLoaded",s,{once:!0}):s():console.info("[KIBT] SSR-Modus: Bootstrap \xfcbersprungen.")},6048:()=>{},6556:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5968)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(6556),t(8253))),_N_E=e.O()}]);