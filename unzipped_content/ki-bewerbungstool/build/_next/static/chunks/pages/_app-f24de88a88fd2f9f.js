(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{412:e=>{e.exports=new Proxy({},{get:(e,t)=>{if("__esModule"===t)return{};throw Error(`You're trying to import \`@heroicons/react/outline/${t}\` from Heroicons v1 but have installed Heroicons v2. Install \`@heroicons/react@v1\` to resolve this error.`)}})},5968:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(4232);n(6048);var l=n(7876),r=n(8944),c=n(412);function s(e){let{job:t,onFinish:n}=e,[l,r]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[i,m]=(0,a.useState)(""),[d,u]=(0,a.useState)(!1),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return;let t=new e;t.lang="de-DE",t.interimResults=!1,t.onresult=e=>{let t=e.results[0][0].transcript;m(e=>e+" "+t)},t.onend=()=>u(!1),p.current=t},[]);let f=async e=>{if(!e.trim())return;let n=[...l,{role:"user",content:e}];r(n),m(""),o(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n,jobId:t.id})}),a=(await e.json()).message;a&&a.role&&r(e=>[...e,a])}catch(e){console.error(e),r(e=>[...e,{role:"system",content:"Fehler beim Senden."}])}finally{o(!1)}};return a.createElement("div",{className:"bg-gray-50 min-h-screen py-6"},a.createElement("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-lg p-6 flex flex-col space-y-6"},a.createElement("header",{className:"flex items-center space-x-4"},a.createElement("img",{src:t.companyLogo,alt:t.companyName,className:"h-16 w-16 object-contain"}),a.createElement("div",null,a.createElement("h2",{className:"text-2xl font-bold"},t.title),a.createElement("p",{className:"text-gray-600"},t.companyName),a.createElement("p",{className:"text-sm text-gray-500"},t.companyAddress),a.createElement("a",{href:t.companyWebsite,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm"},t.companyWebsite))),a.createElement("section",{className:"space-y-4 text-gray-800"},a.createElement("p",{className:"italic text-gray-700"},'"'.concat(t.announcement,'"')),a.createElement("p",null,t.description),a.createElement("div",null,a.createElement("h3",{className:"font-semibold"},"Fragen:"),a.createElement("ul",{className:"list-disc list-inside"},...t.questions.map((e,t)=>a.createElement("li",{key:t},e)))),a.createElement("div",null,a.createElement("h3",{className:"font-semibold"},"Anzufordernde Dateien:"),a.createElement("ul",{className:"list-disc list-inside"},...t.fileUploads.map((e,t)=>a.createElement("li",{key:t},"".concat(e.label).concat(e.required?" (Pflicht)":""))))),a.createElement("div",null,a.createElement("h3",{className:"font-semibold"},"Zus\xe4tzliche Infos:"),a.createElement("ul",{className:"list-disc list-inside"},...t.informationRequested.map((e,t)=>a.createElement("li",{key:t},e))))),a.createElement("section",{className:"flex flex-col space-y-4"},a.createElement("div",{className:"flex-1 h-80 overflow-y-auto border border-gray-200 rounded p-4 flex flex-col space-y-3"},...l.filter(e=>e&&e.role).map((e,t)=>a.createElement("div",{key:t,className:"p-3 rounded-lg ".concat("user"===e.role?"bg-blue-100 self-end":"bg-gray-100 self-start")},a.createElement("span",{className:"block font-medium text-sm"},"user"===e.role?"Sie:":"Bot:"),a.createElement("p",{className:"mt-1"},e.content))),s&&a.createElement("p",{className:"text-center text-gray-500"},"...")),a.createElement("div",{className:"flex items-center space-x-2"},a.createElement("button",{type:"button",onClick:()=>{p.current&&(u(!0),p.current.start())},disabled:d,className:"p-2 rounded-full border ".concat(d?"bg-red-100":"bg-white hover:bg-gray-50")},a.createElement(c.MicrophoneIcon,{className:"h-6 w-6 text-gray-600"})),a.createElement("input",{type:"text",value:i,onChange:e=>m(e.target.value),placeholder:"Nachricht eingeben...",className:"flex-1 border border-gray-300 rounded px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"}),a.createElement("button",{type:"button",onClick:()=>f(i),className:"p-2 bg-blue-600 rounded-full hover:bg-blue-700"},a.createElement(c.PaperAirplaneIcon,{className:"h-6 w-6 text-white transform rotate-90"}))),a.createElement("button",{onClick:()=>n(l),className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700"},"Bewerbung abschlie\xdfen"))))}async function o(){document.querySelectorAll("#kibt-app").forEach(async e=>{let t=e.dataset.jobId||"",{rest_base:n,nonce:a}=window.KIBT_SETTINGS,c=await fetch("".concat(n,"config"),{headers:{"X-WP-Nonce":a}}),o=await c.json(),i=(o.postings||o.jobs||[]).find(e=>e.id===t);if(!i){e.innerHTML="<p>Stelle nicht gefunden.</p>";return}(0,r.createRoot)(e).render((0,l.jsx)(s,{job:i,onFinish:e=>{fetch("".concat(n,"applications"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":a},body:JSON.stringify({jobId:t,messages:e})}).then(()=>{alert("Bewerbung erfolgreich abgeschickt!")})}}))})}function i(e){let{Component:t,pageProps:n}=e;return a.createElement(t,n)}"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o())},6048:()=>{},6556:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(5968)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(6556),t(8253))),_N_E=e.O()}]);