"use strict";(()=>{var e={};e.id=273,e.ids=[273],e.modules={3480:(e,t,n)=>{e.exports=n(5600)},3873:e=>{e.exports=require("path")},5525:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{default:()=>d});var a=n(7984),i=n(9021),o=n.n(i),s=n(3873),u=n.n(s),c=e([a]);async function d(e,t){let{messages:n,jobId:r}=e.body,i=o().readFileSync(u().join(process.cwd(),"data","config.json"),"utf-8"),s=JSON.parse(i),c={};s.rawJson?c=JSON.parse(s.rawJson):s.jsonUrl&&(c=await fetch(s.jsonUrl).then(e=>e.json()));let d=(c.postings||[]).find(e=>e.id===r);if(!d)return t.status(400).json({error:"Stelle nicht gefunden."});let p=`Du bist ein Interview-Bot f\xfcr die Stelle "${d.title}" bei ${c.companyName}.
Du darfst nur Fragen zur Ausschreibung und Firma beantworten.
Bei anderen Fragen antworte: "Entschuldigung, nur zum Job/Firma."`,f=new a.OpenAIApi(new a.Configuration({apiKey:s.apiKey})),l=await f.createChatCompletion({model:"gpt-4",messages:[{role:"system",content:p},...n]});return t.status(200).json({message:l.data.choices[0].message})}a=(c.then?(await c)():c)[0],r()}catch(e){r(e)}})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},7984:e=>{e.exports=import("openai")},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9021:e=>{e.exports=require("fs")},9994:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.r(t),n.d(t,{config:()=>d,default:()=>c,routeModule:()=>p});var a=n(3480),i=n(8667),o=n(6435),s=n(5525),u=e([s]);s=(u.then?(await u)():u)[0];let c=(0,o.M)(s,"default"),d=(0,o.M)(s,"config"),p=new a.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/chat",pathname:"/api/chat",bundlePath:"",filename:""},userland:s});r()}catch(e){r(e)}})}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=9994);module.exports=n})();